{"version":3,"file":"MergePage-B2h-BEyn.js","sources":["../../../frontend/src/pages/MergePage.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-3xl mx-auto px-6 py-12\">\r\n    <h1 class=\"text-2xl font-bold text-gray-900 mb-2\">Merge PDFs</h1>\r\n    <p class=\"text-gray-600 mb-8\">Combine multiple PDF files into a single document.</p>\r\n\r\n    <!-- File list -->\r\n    <div v-if=\"files.length > 0\" class=\"space-y-2 mb-6\">\r\n      <div\r\n        v-for=\"(file, index) in files\"\r\n        :key=\"index\"\r\n        class=\"flex items-center gap-3 bg-white border border-gray-200 rounded-lg px-4 py-3\"\r\n      >\r\n        <GripVertical class=\"w-4 h-4 text-gray-400 cursor-grab\" />\r\n        <FileText class=\"w-5 h-5 text-brand-500\" />\r\n        <span class=\"flex-1 text-sm text-gray-800 truncate\">{{ file.name }}</span>\r\n        <span class=\"text-xs text-gray-500\">{{ humanSize(file.size) }}</span>\r\n        <button @click=\"removeFile(index)\" class=\"p-1 hover:bg-red-50 rounded text-red-400 hover:text-red-600\">\r\n          <X class=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Drop zone -->\r\n    <FileDropZone\r\n      accept=\".pdf\"\r\n      :multiple=\"true\"\r\n      label=\"Add PDF files to merge\"\r\n      hint=\"You can add multiple files. Drag to reorder.\"\r\n      @files-selected=\"addFiles\"\r\n      class=\"mb-8\"\r\n    />\r\n\r\n    <!-- Output name -->\r\n    <div class=\"mb-6\">\r\n      <label class=\"block text-sm font-medium text-gray-700 mb-1\">Output filename</label>\r\n      <input\r\n        v-model=\"outputName\"\r\n        type=\"text\"\r\n        class=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-brand-500\"\r\n        placeholder=\"merged.pdf\"\r\n      />\r\n    </div>\r\n\r\n    <!-- Actions -->\r\n    <div class=\"flex items-center gap-3\">\r\n      <button\r\n        @click=\"merge\"\r\n        :disabled=\"files.length < 2 || processing\"\r\n        class=\"px-6 py-2.5 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 font-medium text-sm\"\r\n      >\r\n        {{ processing ? 'Merging...' : 'Merge PDFs' }}\r\n      </button>\r\n\r\n      <span v-if=\"error\" class=\"text-sm text-red-600\">{{ error }}</span>\r\n    </div>\r\n\r\n    <!-- Result -->\r\n    <div v-if=\"result\" class=\"mt-8 bg-green-50 border border-green-200 rounded-lg p-4\">\r\n      <p class=\"text-green-800 font-medium\">Merge complete!</p>\r\n      <a\r\n        :href=\"result.file_url\"\r\n        download\r\n        class=\"text-sm text-brand-600 hover:underline mt-1 inline-block\"\r\n      >\r\n        Download {{ result.filename }}\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { FileText, GripVertical, X } from 'lucide-vue-next'\r\nimport FileDropZone from '@/components/shared/FileDropZone.vue'\r\nimport { usePdfApi } from '@/composables/usePdfApi'\r\n\r\nconst api = usePdfApi()\r\nconst files = ref([])\r\nconst outputName = ref('merged.pdf')\r\nconst processing = ref(false)\r\nconst error = ref('')\r\nconst result = ref(null)\r\n\r\nfunction addFiles(newFiles) {\r\n  files.value.push(...newFiles)\r\n}\r\n\r\nfunction removeFile(index) {\r\n  files.value.splice(index, 1)\r\n}\r\n\r\nasync function merge() {\r\n  if (files.value.length < 2) return\r\n\r\n  processing.value = true\r\n  error.value = ''\r\n  result.value = null\r\n\r\n  try {\r\n    // Upload all files first\r\n    const uploadResults = []\r\n    for (const file of files.value) {\r\n      const res = await api.uploadFile(file)\r\n      if (!res.success) {\r\n        error.value = `Failed to upload ${file.name}: ${res.error}`\r\n        return\r\n      }\r\n      uploadResults.push(res.data.file_url)\r\n    }\r\n\r\n    // Call merge API\r\n    const mergeResult = await api.mergePdfs(uploadResults, outputName.value)\r\n    if (mergeResult.success) {\r\n      result.value = mergeResult.data\r\n    } else {\r\n      error.value = mergeResult.error || 'Merge failed'\r\n    }\r\n  } catch (e) {\r\n    error.value = e.message || 'Network error'\r\n  } finally {\r\n    processing.value = false\r\n  }\r\n}\r\n\r\nfunction humanSize(bytes) {\r\n  for (const unit of ['B', 'KB', 'MB', 'GB']) {\r\n    if (bytes < 1024) return `${bytes.toFixed(1)} ${unit}`\r\n    bytes /= 1024\r\n  }\r\n  return `${bytes.toFixed(1)} TB`\r\n}\r\n</script>\r\n"],"names":["api","usePdfApi","files","ref","outputName","processing","error","result","addFiles","newFiles","removeFile","index","merge","__async","uploadResults","file","res","mergeResult","e","humanSize","bytes","unit","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_Fragment","_renderList","_createVNode","_unref","GripVertical","FileText","_hoisted_3","_toDisplayString","_hoisted_4","$event","X","FileDropZone","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11"],"mappings":"+zBA4EA,MAAMA,EAAMC,EAAS,EACfC,EAAQC,EAAI,EAAE,EACdC,EAAaD,EAAI,YAAY,EAC7BE,EAAaF,EAAI,EAAK,EACtBG,EAAQH,EAAI,EAAE,EACdI,EAASJ,EAAI,IAAI,EAEvB,SAASK,EAASC,EAAU,CAC1BP,EAAM,MAAM,KAAK,GAAGO,CAAQ,CAC9B,CAEA,SAASC,EAAWC,EAAO,CACzBT,EAAM,MAAM,OAAOS,EAAO,CAAC,CAC7B,CAEA,SAAeC,GAAQ,QAAAC,EAAA,sBACrB,GAAI,EAAAX,EAAM,MAAM,OAAS,GAEzB,CAAAG,EAAW,MAAQ,GACnBC,EAAM,MAAQ,GACdC,EAAO,MAAQ,KAEf,GAAI,CAEF,MAAMO,EAAgB,CAAA,EACtB,UAAWC,KAAQb,EAAM,MAAO,CAC9B,MAAMc,EAAM,MAAMhB,EAAI,WAAWe,CAAI,EACrC,GAAI,CAACC,EAAI,QAAS,CAChBV,EAAM,MAAQ,oBAAoBS,EAAK,IAAI,KAAKC,EAAI,KAAK,GACzD,MACF,CACAF,EAAc,KAAKE,EAAI,KAAK,QAAQ,CACtC,CAGA,MAAMC,EAAc,MAAMjB,EAAI,UAAUc,EAAeV,EAAW,KAAK,EACnEa,EAAY,QACdV,EAAO,MAAQU,EAAY,KAE3BX,EAAM,MAAQW,EAAY,OAAS,cAEvC,OAASC,EAAG,CACVZ,EAAM,MAAQY,EAAE,SAAW,eAC7B,QAAC,CACCb,EAAW,MAAQ,EACrB,EACF,GAEA,SAASc,EAAUC,EAAO,CACxB,UAAWC,IAAQ,CAAC,IAAK,KAAM,KAAM,IAAI,EAAG,CAC1C,GAAID,EAAQ,KAAM,MAAO,GAAGA,EAAM,QAAQ,CAAC,CAAC,IAAIC,CAAI,GACpDD,GAAS,IACX,CACA,MAAO,GAAGA,EAAM,QAAQ,CAAC,CAAC,KAC5B,eAjIEE,EAAA,EAAAC,EAkEM,MAlENC,EAkEM,CAjEJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAiE,KAAA,CAA7D,MAAM,uCAAuC,EAAC,aAAU,EAAA,GAC5DD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAoF,IAAA,CAAjF,MAAM,oBAAoB,EAAC,qDAAkD,EAAA,GAGrExB,EAAA,MAAM,OAAM,GAAvBoB,IAAAC,EAcM,MAdNI,EAcM,EAbJL,EAAA,EAAA,EAAAC,EAYMK,EAAA,KAAAC,EAXoB3B,EAAA,MAAK,CAArBa,EAAMJ,SADhBY,EAYM,MAAA,CAVH,IAAKZ,EACN,MAAM,iFAENmB,EAA0DC,EAAAC,CAAA,EAAA,CAA5C,MAAM,mCAAmC,CAAA,EACvDF,EAA2CC,EAAAE,CAAA,EAAA,CAAjC,MAAM,wBAAwB,CAAA,EACxCP,EAA0E,OAA1EQ,EAA0EC,EAAnBpB,EAAK,IAAI,EAAA,CAAA,EAChEW,EAAqE,OAArEU,EAAqED,EAA9BhB,EAAUJ,EAAK,IAAI,CAAA,EAAA,CAAA,EAC1DW,EAES,SAAA,CAFA,QAAKW,GAAE3B,EAAWC,CAAK,EAAG,MAAM,gEACvCmB,EAAqBC,EAAAO,CAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,8BAMxBR,EAOES,EAAA,CANA,OAAO,OACN,SAAU,GACX,MAAM,yBACN,KAAK,+CACJ,gBAAgB/B,EACjB,MAAM,SAIRkB,EAQM,MARNc,EAQM,CAPJf,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAmF,QAAA,CAA5E,MAAM,8CAA8C,EAAC,kBAAe,EAAA,KAC3EA,EAKE,QAAA,sCAJStB,EAAU,MAAAiC,GACnB,KAAK,OACL,MAAM,+FACN,YAAY,4BAHHjC,EAAA,KAAU,MAQvBsB,EAUM,MAVNe,EAUM,CATJf,EAMS,SAAA,CALN,QAAOd,EACP,SAAUV,EAAA,MAAM,UAAcG,EAAA,MAC/B,MAAM,+GAEHA,EAAA,MAAU,aAAA,YAAA,EAAA,EAAAqC,CAAA,EAGHpC,EAAA,WAAZiB,EAAkE,OAAlEoB,EAAkER,EAAf7B,EAAA,KAAK,EAAA,CAAA,cAI/CC,EAAA,OAAXe,IAAAC,EASM,MATNqB,EASM,CARJnB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAyD,IAAA,CAAtD,MAAM,4BAA4B,EAAC,kBAAe,EAAA,GACrDA,EAMI,IAAA,CALD,KAAMnB,EAAA,MAAO,SACd,SAAA,GACA,MAAM,4DACP,aACU4B,EAAG5B,EAAA,MAAO,QAAQ,EAAA,EAAAsC,CAAA"}