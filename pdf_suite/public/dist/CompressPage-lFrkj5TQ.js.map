{"version":3,"file":"CompressPage-lFrkj5TQ.js","sources":["../../../frontend/src/pages/CompressPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-3xl mx-auto px-6 py-12\">\r\n    <h1 class=\"text-2xl font-bold text-gray-900 mb-2\">Compress PDF</h1>\r\n    <p class=\"text-gray-600 mb-8\">Reduce PDF file size while maintaining quality.</p>\r\n\r\n    <div v-if=\"!file\" class=\"mb-8\">\r\n      <FileDropZone accept=\".pdf\" label=\"Select a PDF to compress\" @files-selected=\"setFile\" />\r\n    </div>\r\n\r\n    <div v-else>\r\n      <div class=\"flex items-center gap-3 bg-white border border-gray-200 rounded-lg px-4 py-3 mb-6\">\r\n        <FileText class=\"w-5 h-5 text-brand-500\" />\r\n        <span class=\"flex-1 text-sm font-medium\">{{ file.name }}</span>\r\n        <span class=\"text-xs text-gray-500\">{{ humanSize(file.size) }}</span>\r\n        <button @click=\"file = null; result = null\" class=\"text-gray-400 hover:text-red-500\">\r\n          <X class=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Quality selector -->\r\n      <div class=\"mb-6\">\r\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Compression level</label>\r\n        <div class=\"flex gap-3\">\r\n          <button\r\n            v-for=\"q in qualities\"\r\n            :key=\"q.value\"\r\n            @click=\"quality = q.value\"\r\n            class=\"flex-1 px-4 py-3 rounded-lg border text-center\"\r\n            :class=\"quality === q.value ? 'bg-brand-50 border-brand-300' : 'border-gray-200 hover:border-gray-300'\"\r\n          >\r\n            <p class=\"font-medium text-sm\" :class=\"quality === q.value ? 'text-brand-700' : 'text-gray-800'\">{{ q.label }}</p>\r\n            <p class=\"text-xs text-gray-500 mt-0.5\">{{ q.desc }}</p>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        @click=\"compress\"\r\n        :disabled=\"processing\"\r\n        class=\"px-6 py-2.5 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 font-medium text-sm\"\r\n      >\r\n        {{ processing ? 'Compressing...' : 'Compress PDF' }}\r\n      </button>\r\n\r\n      <p v-if=\"error\" class=\"mt-3 text-sm text-red-600\">{{ error }}</p>\r\n\r\n      <!-- Result -->\r\n      <div v-if=\"result\" class=\"mt-8 bg-green-50 border border-green-200 rounded-lg p-5\">\r\n        <div class=\"flex items-center justify-between mb-3\">\r\n          <p class=\"text-green-800 font-medium\">Compression complete!</p>\r\n          <span class=\"text-sm font-semibold text-green-700\">-{{ result.reduction_percent }}%</span>\r\n        </div>\r\n        <div class=\"flex items-center gap-6 text-sm text-gray-700\">\r\n          <div>\r\n            <span class=\"text-gray-500\">Original:</span>\r\n            <span class=\"ml-1 font-medium\">{{ result.original_size_human }}</span>\r\n          </div>\r\n          <ArrowRight class=\"w-4 h-4 text-gray-400\" />\r\n          <div>\r\n            <span class=\"text-gray-500\">Compressed:</span>\r\n            <span class=\"ml-1 font-medium\">{{ result.compressed_size_human }}</span>\r\n          </div>\r\n        </div>\r\n        <a :href=\"result.file_url\" download class=\"text-sm text-brand-600 hover:underline mt-3 inline-block\">\r\n          Download compressed PDF\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { FileText, X, ArrowRight } from 'lucide-vue-next'\r\nimport FileDropZone from '@/components/shared/FileDropZone.vue'\r\nimport { usePdfApi } from '@/composables/usePdfApi'\r\n\r\nconst api = usePdfApi()\r\nconst file = ref(null)\r\nconst quality = ref('medium')\r\nconst processing = ref(false)\r\nconst error = ref('')\r\nconst result = ref(null)\r\n\r\nconst qualities = [\r\n  { value: 'high', label: 'Low', desc: 'Minimal compression' },\r\n  { value: 'medium', label: 'Medium', desc: 'Balanced' },\r\n  { value: 'low', label: 'High', desc: 'Max compression' },\r\n]\r\n\r\nfunction setFile(files) {\r\n  if (files.length > 0) file.value = files[0]\r\n}\r\n\r\nasync function compress() {\r\n  if (!file.value) return\r\n  processing.value = true\r\n  error.value = ''\r\n  result.value = null\r\n\r\n  try {\r\n    const upload = await api.uploadFile(file.value)\r\n    if (!upload.success) { error.value = upload.error; return }\r\n\r\n    const res = await api.compressPdf(upload.data.file_url, quality.value)\r\n    if (res.success) {\r\n      result.value = res.data\r\n    } else {\r\n      error.value = res.error\r\n    }\r\n  } catch (e) {\r\n    error.value = e.message\r\n  } finally {\r\n    processing.value = false\r\n  }\r\n}\r\n\r\nfunction humanSize(bytes) {\r\n  for (const unit of ['B', 'KB', 'MB', 'GB']) {\r\n    if (bytes < 1024) return `${bytes.toFixed(1)} ${unit}`\r\n    bytes /= 1024\r\n  }\r\n  return `${bytes.toFixed(1)} TB`\r\n}\r\n</script>\r\n"],"names":["api","usePdfApi","file","ref","quality","processing","error","result","qualities","setFile","files","compress","__async","upload","res","e","humanSize","bytes","unit","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_3","_hoisted_4","_createVNode","_unref","FileText","_hoisted_5","_toDisplayString","_hoisted_6","$event","X","_hoisted_7","_hoisted_8","_Fragment","_renderList","q","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","ArrowRight","_hoisted_18","_hoisted_19","_hoisted_2","FileDropZone"],"mappings":"kpCA6EA,MAAMA,EAAMC,EAAS,EACfC,EAAOC,EAAI,IAAI,EACfC,EAAUD,EAAI,QAAQ,EACtBE,EAAaF,EAAI,EAAK,EACtBG,EAAQH,EAAI,EAAE,EACdI,EAASJ,EAAI,IAAI,EAEjBK,EAAY,CAChB,CAAE,MAAO,OAAQ,MAAO,MAAO,KAAM,qBAAqB,EAC1D,CAAE,MAAO,SAAU,MAAO,SAAU,KAAM,UAAU,EACpD,CAAE,MAAO,MAAO,MAAO,OAAQ,KAAM,iBAAiB,CACxD,EAEA,SAASC,EAAQC,EAAO,CAClBA,EAAM,OAAS,IAAGR,EAAK,MAAQQ,EAAM,CAAC,EAC5C,CAEA,SAAeC,GAAW,QAAAC,EAAA,sBACxB,GAAKV,EAAK,MACV,CAAAG,EAAW,MAAQ,GACnBC,EAAM,MAAQ,GACdC,EAAO,MAAQ,KAEf,GAAI,CACF,MAAMM,EAAS,MAAMb,EAAI,WAAWE,EAAK,KAAK,EAC9C,GAAI,CAACW,EAAO,QAAS,CAAEP,EAAM,MAAQO,EAAO,MAAO,MAAO,CAE1D,MAAMC,EAAM,MAAMd,EAAI,YAAYa,EAAO,KAAK,SAAUT,EAAQ,KAAK,EACjEU,EAAI,QACNP,EAAO,MAAQO,EAAI,KAEnBR,EAAM,MAAQQ,EAAI,KAEtB,OAASC,EAAG,CACVT,EAAM,MAAQS,EAAE,OAClB,QAAC,CACCV,EAAW,MAAQ,EACrB,EACF,GAEA,SAASW,EAAUC,EAAO,CACxB,UAAWC,IAAQ,CAAC,IAAK,KAAM,KAAM,IAAI,EAAG,CAC1C,GAAID,EAAQ,KAAM,MAAO,GAAGA,EAAM,QAAQ,CAAC,CAAC,IAAIC,CAAI,GACpDD,GAAS,IACX,CACA,MAAO,GAAGA,EAAM,QAAQ,CAAC,CAAC,KAC5B,eA1HEE,EAAA,EAAAC,EAmEM,MAnENC,EAmEM,CAlEJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAmE,KAAA,CAA/D,MAAM,uCAAuC,EAAC,eAAY,EAAA,GAC9DD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAiF,IAAA,CAA9E,MAAM,oBAAoB,EAAC,kDAA+C,EAAA,GAEjErB,EAAA,WAIZkB,EA0DM,MAAAI,EAAA,CAzDJD,EAOM,MAPNE,EAOM,CANJC,EAA2CC,EAAAC,CAAA,EAAA,CAAjC,MAAM,wBAAwB,CAAA,EACxCL,EAA+D,OAA/DM,EAA+DC,EAAnB5B,EAAA,MAAK,IAAI,EAAA,CAAA,EACrDqB,EAAqE,OAArEQ,EAAqED,EAA9Bd,EAAUd,EAAA,MAAK,IAAI,CAAA,EAAA,CAAA,EAC1DqB,EAES,SAAA,CAFA,QAAKD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAU,GAAA,CAAE9B,EAAA,MAAI,KAASK,EAAA,MAAM,IAAA,GAAS,MAAM,qCAChDmB,EAAqBC,EAAAM,CAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,MAKtBV,EAcM,MAdNW,EAcM,CAbJZ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAqF,QAAA,CAA9E,MAAM,8CAA8C,EAAC,oBAAiB,EAAA,GAC7EA,EAWM,MAXNY,EAWM,MAVJf,EASSgB,EAAA,KAAAC,EARK7B,EAAL8B,GADTf,EASS,SAAA,CAPN,IAAKe,EAAE,MACP,QAAKN,GAAE5B,EAAA,MAAUkC,EAAE,MACpB,SAAM,iDACElC,UAAYkC,EAAE,MAAK,+BAAA,uCAAA,CAAA,IAE3Bf,EAAkH,IAAA,CAA/G,SAAM,sBAA8BnB,UAAYkC,EAAE,MAAK,iBAAA,eAAA,CAAA,CAA0C,EAAAR,EAAAQ,EAAE,KAAK,EAAA,CAAA,EAC3Gf,EAAwD,IAAxDgB,EAAwDT,EAAbQ,EAAE,IAAI,EAAA,CAAA,mBAKvDf,EAMS,SAAA,CALN,QAAOZ,EACP,SAAUN,EAAA,MACX,MAAM,+GAEHA,EAAA,MAAU,iBAAA,cAAA,EAAA,EAAAmC,CAAA,EAGNlC,EAAA,WAATc,EAAiE,IAAjEqB,EAAiEX,EAAZxB,EAAA,KAAK,EAAA,CAAA,YAG/CC,EAAA,OAAXY,IAAAC,EAmBM,MAnBNsB,EAmBM,CAlBJnB,EAGM,MAHNoB,EAGM,CAFJrB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAA+D,IAAA,CAA5D,MAAM,4BAA4B,EAAC,wBAAqB,EAAA,GAC3DA,EAA0F,OAA1FqB,EAAmD,MAAIrC,EAAA,MAAO,iBAAiB,EAAG,IAAC,CAAA,IAErFgB,EAUM,MAVNsB,EAUM,CATJtB,EAGM,MAAA,KAAA,CAFJD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAA4C,OAAA,CAAtC,MAAM,eAAe,EAAC,YAAS,EAAA,GACrCA,EAAsE,OAAtEuB,EAAsEhB,EAApCvB,EAAA,MAAO,mBAAmB,EAAA,CAAA,IAE9DmB,EAA4CC,EAAAoB,CAAA,EAAA,CAAhC,MAAM,uBAAuB,CAAA,EACzCxB,EAGM,MAAA,KAAA,CAFJD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAA8C,OAAA,CAAxC,MAAM,eAAe,EAAC,cAAW,EAAA,GACvCA,EAAwE,OAAxEyB,EAAwElB,EAAtCvB,EAAA,MAAO,qBAAqB,EAAA,CAAA,MAGlEgB,EAEI,IAAA,CAFA,KAAMhB,EAAA,MAAO,SAAU,SAAA,GAAS,MAAM,4DAA2D,4BAErG,EAAA0C,CAAA,kBA5DJ9B,IAAAC,EAEM,MAFN8B,EAEM,CADJxB,EAAyFyB,EAAA,CAA3E,OAAO,OAAO,MAAM,2BAA4B,gBAAgB1C"}