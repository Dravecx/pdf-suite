var h=(w,f,s)=>new Promise((l,r)=>{var g=o=>{try{v(s.next(o))}catch(m){r(m)}},i=o=>{try{v(s.throw(o))}catch(m){r(m)}},v=o=>o.done?l(o.value):Promise.resolve(o.value).then(g,i);v((s=s.apply(w,f)).next())});import{o as n,c as u,b as t,F,r as C,p as D,t as b,a as _,g as B,h as I,_ as E,d as x,U as k,$ as N,V as L,b2 as M,z as c,e as O}from"./vue-vendor-Cf1u-26_.js";import{_ as U}from"./FileDropZone-BNRVS-bJ.js";import{u as T}from"./usePdfApi-BXiAzpXu.js";const q={class:"max-w-3xl mx-auto px-6 py-12"},z={class:"mb-6"},Q={class:"flex flex-wrap gap-2"},W=["onClick"],j={key:0,class:"space-y-2 mb-4"},R={class:"flex-1 truncate"},X=["onClick"],G={key:1,class:"mb-6"},H={key:2,class:"mb-6"},J={key:3,class:"mb-6"},K=["disabled"],Y={key:4,class:"mt-3 text-sm text-red-600"},Z={key:5,class:"mt-8 bg-white border border-gray-200 rounded-lg p-5"},ee={class:"flex items-center justify-between mb-2"},te={class:"text-sm font-medium"},ae={class:"text-sm text-gray-500"},se={class:"w-full bg-gray-200 rounded-full h-2"},ie={__name:"BatchPage",setup(w){const f=T(),s=c("compress"),l=c([]),r=c({quality:"medium",text:"CONFIDENTIAL",language:"eng"}),g=c(!1),i=c(""),v=c(""),o=c(""),m=c(0),y=c(0),A=[{value:"compress",label:"Compress"},{value:"watermark",label:"Watermark"},{value:"ocr",label:"OCR"},{value:"merge",label:"Merge All"}],P=O(()=>m.value?y.value/m.value*100:0);function S(d){l.value.push(...d)}function V(){return h(this,null,function*(){if(l.value.length!==0){g.value=!0,i.value="";try{const d=[];for(const a of l.value){const p=yield f.uploadFile(a);if(!p.success){i.value=`Upload failed: ${p.error}`;return}d.push(p.data.file_url)}const e=yield f.startBatch(s.value,d,r.value);e.success?(v.value=e.data.batch_name,o.value="Queued",m.value=l.value.length,y.value=0,$()):i.value=e.error}catch(d){i.value=d.message}finally{g.value=!1}}})}function $(){return h(this,null,function*(){const d=setInterval(()=>h(this,null,function*(){const e=yield f.getBatchStatus(v.value);e!=null&&e.success&&(o.value=e.data.status,y.value=e.data.processed_files,(e.data.status==="Completed"||e.data.status==="Failed")&&(clearInterval(d),e.data.status==="Failed"&&(i.value=e.data.error||"Batch failed")))}),2e3)})}return(d,e)=>(n(),u("div",q,[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Batch Operations",-1)),e[10]||(e[10]=t("p",{class:"text-gray-600 mb-8"},"Process multiple PDF files at once.",-1)),t("div",z,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Operation",-1)),t("div",Q,[(n(),u(F,null,C(A,a=>t("button",{key:a.value,onClick:p=>s.value=a.value,class:D(["px-4 py-2 rounded-lg text-sm border",s.value===a.value?"bg-brand-50 border-brand-300 text-brand-700":"border-gray-300"])},b(a.label),11,W)),64))])]),l.value.length>0?(n(),u("div",j,[(n(!0),u(F,null,C(l.value,(a,p)=>(n(),u("div",{key:p,class:"flex items-center gap-3 bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm"},[_(B(I),{class:"w-4 h-4 text-brand-500"}),t("span",R,b(a.name),1),t("button",{onClick:le=>l.value.splice(p,1),class:"text-gray-400 hover:text-red-500"},[_(B(E),{class:"w-4 h-4"})],8,X)]))),128))])):x("",!0),_(U,{accept:".pdf",multiple:!0,label:"Add PDF files for batch processing",onFilesSelected:S,class:"mb-6"}),s.value==="compress"?(n(),u("div",G,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quality",-1)),k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.quality=a),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm"},[...e[4]||(e[4]=[t("option",{value:"high"},"Low compression",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"low"},"Max compression",-1)])],512),[[N,r.value.quality]])])):x("",!0),s.value==="watermark"?(n(),u("div",H,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Watermark text",-1)),k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.text=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"CONFIDENTIAL"},null,512),[[L,r.value.text]])])):x("",!0),s.value==="ocr"?(n(),u("div",J,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Language",-1)),k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.language=a),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm"},[...e[7]||(e[7]=[t("option",{value:"eng"},"English",-1),t("option",{value:"ara"},"Arabic",-1),t("option",{value:"eng+ara"},"English + Arabic",-1)])],512),[[N,r.value.language]])])):x("",!0),t("button",{onClick:V,disabled:l.value.length===0||g.value,class:"px-6 py-2.5 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 font-medium text-sm"},b(g.value?"Processing...":`Process ${l.value.length} files`),9,K),i.value?(n(),u("p",Y,b(i.value),1)):x("",!0),v.value?(n(),u("div",Z,[t("div",ee,[t("span",te,b(o.value),1),t("span",ae,b(y.value)+" / "+b(m.value),1)]),t("div",se,[t("div",{class:"bg-brand-600 h-2 rounded-full transition-all",style:M({width:`${P.value}%`})},null,4)])])):x("",!0)]))}};export{ie as default};
//# sourceMappingURL=BatchPage-BEC4kgLe.js.map
